# 第六章static,final和常量设计

## 第一节 static

static（静态的），适用于变量，方法，类，匿名方法快

​             变量： static int A = 5；使内存中只有一个值，共享一个空间

​            方法：只能使用静态变量，不能使用非静态变量，禁止使用非静态方法；

​                       调用静态方法直接   类名.方法名

​                        调用非静态方法，需要   类名 A = new 类名（）；

​                        非静态方法可以调用静态方法，反过来不行

​            匿名方法块：（代码块）无方法名，无(),只有{}

​                       有static;静态方法块，只在类的第一次被加载使调用，再次加载类时不在调用静态块

​                   **执行顺序** static > 匿名块 > 构造函数

## 第二节 单例模式

​           单例模式：单态模式，Singleton

​                                只能new一次，只能保留一个实例对象

​                               类名  obj1  =  类名.方法名（）

​                                再new会报错

## 第三节 final

​             final可以用于 类，方法，字段

​              final 类：不能被继承        final public class 类名{}

​             final 方法：若是在父类中，子类不可以重写此方法，但是可以重载，形参不同

​           final 变量：不能再次赋值，**基本类**不能修改其值

​                                  **对象实例**不可以修改指针，但可以修改对象内部的值

## 第四节 常量设计和常量池

​       常量：不会修改的量

​                    final不能修改，static不会修改，只读，只要一份

​                  ——public static final int A;

​                 常量名：全大写，用“_"隔开

接口内定义的变量默认是常量，不能修改

常量池：只有float和Double没有

​                内存中只有同一个值的位置，定义的对象相同，指向同一个内存

​              **常量式**（字面量赋值创建），放在**栈内存**，将被常量话           

```
Integer a = 10;
String b = "abc"
```

​               new对象进行创建，放在**堆内存**

```
Integer c = new Integer(10);
String d = new String("abc")
```

​                   

举例：

```
1.   int i1 = 10;
2.   Integer i2 = 10;
3.   Integer i3 = new Integer(10);
4.   Integer i4 = new Integer(5);
5.   Integer i5 = new Integer(5);
6.   Integer i6 = i4 + i5;
```

​            i1 = i2;i1 = 13; i2 != i3 ; i1 = i4 + i5;

​          2和3式自动装箱，i2指向栈内存，i3是对象，指向堆内存

​           基本类型和包装类型进行比较，包装类型自动拆开包装

​           两个对象比较，比较其地址

​          i4 + i5 自动拆箱为基类型，得到基本类型10

```
String s1 = "abcdef";
String s2 = "abc";
String s3 = "abc";
String s4 = new String("abc");
String s5 = new String("abc");
       s6 = s1 + "def";
       s7 = "abc" + "def";
       s8 = "abc" + new String("def");
```

​            s3和s2指向同一栈内存

​             s5和s4 分别指向不同的堆内存

​              s6涉及变量，编译器不会优化

​               s7都是常量，自动优化成abcdef

​             s8设计new对象，不优化

​         所以s6,s7,s8 互不相等 

## 第五节 不可变对象和字符串

不可变对象：Immutable object

不可变对象进行修改时，会开辟新的空间

字符串是一种典型的不可变对象

```
String a = "abc";//常量赋值，栈内存
String a = new String("abc");//new对象，堆内存
```

字符串内容比较：equals

是否指向同一个对象;指针比较  ==

相同的常量字符串值存储一份

**原地修改**

String Buffer类的append方法（同步，线程安全，修改快速）

String Builder类的append 方法（不同步，不安全，更快）



## 作业1

静态成员变量通常也叫做类变量，因为它不从属于任何对象。非静态的成员变量，也叫做实例变量，是从属于某一个具体的对象。

![](D:\桌面\后端\图片\Java第六章作业图片\1.png)

![2](D:\桌面\后端\图片\Java第六章作业图片\2.png)

![3](D:\桌面\后端\图片\Java第六章作业图片\3.png)

![4](D:\桌面\后端\图片\Java第六章作业图片\4.png)

## 作业2

![](D:\桌面\后端\图片\Java第六章作业图片\5.png)

![6](D:\桌面\后端\图片\Java第六章作业图片\6.png)

![7](D:\桌面\后端\图片\Java第六章作业图片\7.png)

![8](D:\桌面\后端\图片\Java第六章作业图片\8.png)

![9](D:\桌面\后端\图片\Java第六章作业图片\9.png)